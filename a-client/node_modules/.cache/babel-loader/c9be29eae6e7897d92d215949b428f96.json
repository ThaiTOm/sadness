{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/duythai/Developer/sadness/a-client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useMemo, useState, useEffect } from 'react';\nimport './App.css';\nimport { useHistory } from 'react-router-dom';\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport ActivatePage from './component/loginComponent/activate';\nimport Forget from './component/loginComponent/forget';\nimport ChangePassword from './component/loginComponent/changePassword';\nimport HomePage from './component/HomePage';\nimport NewsMain from './component/newsComponents/newsMain';\nimport Main_block from './component/main.block';\nimport ViewOneBlog from './component/newsComponents/viewBlog/viewOneBlog';\nimport { Notifications, MessageList } from './userContext';\nimport axios from \"axios\";\nimport { getCookie } from './helpers/auth';\nimport socketApp from './socket';\nimport { toast } from \"react-toastify\";\nimport Policy from './component/policy/policy';\nimport Main_page from './component/chatComponent/main_page';\n\nfunction App() {\n  _s();\n\n  let socket = socketApp.getSocket();\n  const id = getCookie().token;\n  const [value, setValue] = useState([]);\n  const [listMessage, setListMessage] = useState(null);\n  const notifications = useMemo(() => ({\n    value,\n    setValue\n  }), [value, setValue]);\n  const messageList = useMemo(() => ({\n    listMessage,\n    setListMessage\n  }), [listMessage, setListMessage]);\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(10);\n  const history = useHistory();\n\n  if (id) {\n    socket.emit(\"join\", {\n      id\n    });\n  }\n\n  useEffect(() => {\n    let fn = () => {\n      socket.on(\"activities\", async msg => {\n        toast.info(msg.number + msg.value);\n      });\n    };\n\n    fn();\n  }, [socket]);\n  useEffect(() => {\n    let fn = () => {\n      axios.get(\"http://localhost:2704/api/news/notifications?id=\" + id + \"&start=0&end=10\").then(res => {\n        let fnc = () => {\n          for (let data of res.data.value) {\n            let arr = {\n              type: data.value,\n              value: data.type,\n              number: data.number\n            };\n            setValue(a => [...a, arr]);\n          }\n        };\n\n        res.data.value !== undefined && fnc();\n      }).catch(err => {\n        console.log(err);\n      });\n      axios.post(\"http://localhost:2704/api/msgC/contactL?start=\" + start + \"&end=\" + end, {\n        id\n      }).then(res => {\n        if (res.data.message) {\n          history.push(\"/report\");\n        } else {\n          setListMessage(res.data);\n        }\n      }).catch(err => {});\n    };\n\n    fn();\n  }, [id]);\n  return /*#__PURE__*/_jsxDEV(BrowserRouter, {\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: /*#__PURE__*/_jsxDEV(MessageList.Provider, {\n        value: messageList,\n        children: /*#__PURE__*/_jsxDEV(Notifications.Provider, {\n          value: notifications,\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            children: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/users/active/:token\",\n            exact: true,\n            render: props => /*#__PURE__*/_jsxDEV(ActivatePage, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/users/forget\",\n            exact: true,\n            render: props => /*#__PURE__*/_jsxDEV(Forget, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/users/password/forget/:token\",\n            exact: true,\n            render: props => /*#__PURE__*/_jsxDEV(ChangePassword, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), console.log(messageList), messageList && /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/chat\",\n            component: Main_page\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/news\",\n            component: NewsMain\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/report\",\n            component: Main_block\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/posts/id=:id\",\n            render: props => /*#__PURE__*/_jsxDEV(ViewOneBlog, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/policy\",\n            render: props => /*#__PURE__*/_jsxDEV(Policy, { ...props\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"TRequjlOOwl0XEAcT5A1ylUCE70=\", false, function () {\n  return [useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/duythai/Developer/sadness/a-client/src/App.js"],"names":["React","useMemo","useState","useEffect","useHistory","BrowserRouter","Switch","Route","ActivatePage","Forget","ChangePassword","HomePage","NewsMain","Main_block","ViewOneBlog","Notifications","MessageList","axios","getCookie","socketApp","toast","Policy","Main_page","App","socket","getSocket","id","token","value","setValue","listMessage","setListMessage","notifications","messageList","start","setStart","end","setEnd","history","emit","fn","on","msg","info","number","get","then","res","fnc","data","arr","type","a","undefined","catch","err","console","log","post","message","push","props"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useEffect } from 'react'\nimport './App.css';\nimport { useHistory } from 'react-router-dom';\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\"\nimport ActivatePage from './component/loginComponent/activate';\nimport Forget from './component/loginComponent/forget';\nimport ChangePassword from './component/loginComponent/changePassword';\nimport HomePage from './component/HomePage';\nimport NewsMain from './component/newsComponents/newsMain';\nimport Main_block from './component/main.block';\nimport ViewOneBlog from './component/newsComponents/viewBlog/viewOneBlog';\nimport { Notifications, MessageList } from './userContext';\nimport axios from \"axios\"\nimport { getCookie } from './helpers/auth';\nimport socketApp from './socket';\nimport { toast } from \"react-toastify\"\nimport Policy from './component/policy/policy';\nimport Main_page from './component/chatComponent/main_page';\n\n\nfunction App() {\n  let socket = socketApp.getSocket()\n  const id = getCookie().token\n  const [value, setValue] = useState([]);\n  const [listMessage, setListMessage] = useState(null)\n  const notifications = useMemo(() => ({ value, setValue }), [value, setValue]);\n  const messageList = useMemo(() => ({ listMessage, setListMessage }), [listMessage, setListMessage])\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(10);\n  const history = useHistory()\n\n  if (id) {\n    socket.emit(\"join\", { id })\n  }\n  useEffect(() => {\n    let fn = () => {\n      socket.on(\"activities\", async (msg) => {\n        toast.info(\n          msg.number + msg.value\n        )\n      })\n    }\n    fn()\n  }, [socket])\n  useEffect(() => {\n    let fn = () => {\n      axios.get(\"http://localhost:2704/api/news/notifications?id=\" + id + \"&start=0&end=10\")\n        .then(res => {\n          let fnc = () => {\n            for (let data of res.data.value) {\n              let arr = {\n                type: data.value,\n                value: data.type,\n                number: data.number\n              }\n              setValue(a => [...a, arr])\n            }\n          }\n          res.data.value !== undefined && fnc()\n        }).catch(err => {\n          console.log(err)\n        })\n\n      axios.post(\"http://localhost:2704/api/msgC/contactL?start=\" + start + \"&end=\" + end, { id })\n        .then(res => {\n          if (res.data.message) {\n            history.push(\"/report\")\n          } else {\n            setListMessage(res.data)\n          }\n        }).catch(err => {\n        })\n    }\n    fn()\n  }, [id])\n\n  return (\n    <BrowserRouter >\n      <Switch>\n        <MessageList.Provider value={messageList}>\n          <Notifications.Provider value={notifications}>\n            <Route exact path=\"/\" >\n              <HomePage />\n            </Route>\n            <Route\n              path=\"/users/active/:token\"\n              exact\n              render={props => <ActivatePage {...props} />}\n            />\n            <Route\n              path=\"/users/forget\"\n              exact\n              render={props => <Forget {...props} />}\n            />\n            <Route\n              path=\"/users/password/forget/:token\"\n              exact\n              render={props => <ChangePassword {...props} />}\n            />\n            {console.log(messageList)}\n            {messageList && <Route\n              path=\"/chat\"\n              component={Main_page} />}\n            <Route\n              path=\"/news\"\n              component={NewsMain} />\n            <Route\n              path=\"/report\"\n              component={Main_block} />\n            <Route\n              path=\"/posts/id=:id\"\n              render={props => <ViewOneBlog {...props} />}\n            />\n            <Route path=\"/policy\"\n              render={props => <Policy {...props} />}\n            />\n          </Notifications.Provider>\n        </MessageList.Provider >\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}