{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/duythai/Developer/sadness/a-client/src/component/newsComponents/viewBlog/viewBlog.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Skeleton from \"../exNews/Skeleton\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport \"../../style/viewBlog.css\";\nimport { getCookie } from '../../../helpers/auth';\nimport socketApp from '../../../socket';\nimport SeeLike from '../exNews/seeLike';\nimport LikeComment from '../exOne/likeComment';\nimport RequireLogin from '../../../helpers/requireLogin';\nimport ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\nimport ShareBlog from '../exOne/shareBlog';\nimport { ImageRender } from '../../../helpers/news';\n\nfunction ViewBlog() {\n  _s();\n\n  let socket = socketApp.getSocket();\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(3);\n  const [blog, setBlog] = useState([]);\n  const [hasmore, setHasmore] = useState(true);\n  const id = getCookie().token;\n  const [login, setLogin] = useState(false);\n\n  const fetchData = () => {\n    setTimeout(() => {\n      setStart(start + 3);\n      setEnd(end + 3);\n    }, 1500);\n  };\n\n  const handleValidateLogin = () => {\n    if (id) setLogin(null);else setLogin(\"ok\");\n  };\n\n  const setBlogRes = async res => {\n    let a = res.data.data;\n\n    try {\n      for await (let value of a) {\n        setBlog(a => [...a, value]);\n      }\n    } catch (error) {\n      return;\n    }\n  };\n\n  const handleError = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"C\\xF3 l\\u1ED7i \\u0111\\u1EA3 x\\u1EA3y ra b\\u1EA1n h\\xE3y th\\u1EED l\\u1EA1i sau\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this);\n  };\n\n  useEffect(() => {\n    let fn = () => {\n      if (id) {\n        axios.get(\"http://localhost:2704/api/news/data?start=\" + start + \"&end=\" + end + \"&id=\" + id).then(res => {\n          if (res.data.data !== undefined) setBlogRes(res);else setHasmore(false);\n        }).catch(err => {\n          handleError();\n        });\n      } else {\n        axios.get(\"http://localhost:2704/api/news/dataNo?start=\" + start + \"&end=\" + end).then(res => {\n          setBlogRes(res);\n        }).catch(err => {\n          handleError();\n        });\n      }\n    };\n\n    fn();\n  }, [end]);\n\n  const CommentRender = cb => {\n    const {\n      value,\n      i\n    } = cb.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: value.comment[i] !== undefined ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"comment_blog\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            alt: \"avatart_user\",\n            src: \"./demo.jpeg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: value.comment[i].value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"activities\",\n            children: /*#__PURE__*/_jsxDEV(LikeComment, {\n              props: {\n                data: value.comment[i],\n                i: value.comment[i].id + i,\n                value: value.idBlog\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 50\n      }, this) : console.log()\n    }, void 0, false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"viewBlog\",\n    children: [blog.length === 0 && /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 35\n    }, this), login ? /*#__PURE__*/_jsxDEV(RequireLogin, {\n      onClick: value => setLogin(value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 22\n    }, this) : console.log(), /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n      dataLength: blog.length,\n      next: fetchData,\n      hasMore: hasmore,\n      loader: /*#__PURE__*/_jsxDEV(Skeleton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }, this),\n      children: blog !== undefined ? blog.map(function (value, i) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"viewBlog_li\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"contain_blog\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"profile\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                alt: \"profile_image\",\n                src: \"./demo.jpeg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"profile_text\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Ng\\u01B0\\u1EDDi t\\u1ECFa s\\xE1ng nh\\u1EA5t l\\xE0 ng\\u01B0\\u1EDDi c\\xF4 \\u0111\\u1ED9c nh\\u1EA5t\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text_blog\",\n                  children: value.text.map(function (data, i) {\n                    return /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: data\n                    }, i, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 64\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image-blog\",\n              children: /*#__PURE__*/_jsxDEV(ImageRender, {\n                props: {\n                  value\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"activities_blog\",\n              children: [/*#__PURE__*/_jsxDEV(SeeLike, {\n                props: {\n                  value,\n                  i,\n                  className: \"inner\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inner\",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/posts/id=\" + value.idBlog,\n                  children: /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"comment list\",\n                    children: [/*#__PURE__*/_jsxDEV(ChatBubbleOutlineIcon, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 132,\n                      columnNumber: 53\n                    }, this), \"   Comment\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inner share\",\n                children: /*#__PURE__*/_jsxDEV(ShareBlog, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"comment_blog_view\",\n              children: [/*#__PURE__*/_jsxDEV(CommentRender, {\n                props: {\n                  value,\n                  i: 0\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(CommentRender, {\n                props: {\n                  value,\n                  i: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(CommentRender, {\n                props: {\n                  value,\n                  i: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 33\n          }, this)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 29\n        }, this);\n      }) : {}\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ViewBlog, \"r565Di2eLmpoSc80NeIGRsZlyTg=\");\n\n_c = ViewBlog;\nexport default ViewBlog;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewBlog\");","map":{"version":3,"sources":["/home/duythai/Developer/sadness/a-client/src/component/newsComponents/viewBlog/viewBlog.js"],"names":["React","useState","useEffect","Link","axios","Skeleton","InfiniteScroll","getCookie","socketApp","SeeLike","LikeComment","RequireLogin","ChatBubbleOutlineIcon","ShareBlog","ImageRender","ViewBlog","socket","getSocket","start","setStart","end","setEnd","blog","setBlog","hasmore","setHasmore","id","token","login","setLogin","fetchData","setTimeout","handleValidateLogin","setBlogRes","res","a","data","value","error","handleError","fn","get","then","undefined","catch","err","CommentRender","cb","i","props","comment","idBlog","console","log","length","map","text","className"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link } from \"react-router-dom\"\nimport axios from \"axios\"\nimport Skeleton from \"../exNews/Skeleton\"\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport \"../../style/viewBlog.css\"\nimport { getCookie } from '../../../helpers/auth';\nimport socketApp from '../../../socket';\nimport SeeLike from '../exNews/seeLike';\nimport LikeComment from '../exOne/likeComment';\nimport RequireLogin from '../../../helpers/requireLogin';\nimport ChatBubbleOutlineIcon from '@material-ui/icons/ChatBubbleOutline';\nimport ShareBlog from '../exOne/shareBlog';\nimport { ImageRender } from '../../../helpers/news';\n\nfunction ViewBlog() {\n    let socket = socketApp.getSocket();\n    const [start, setStart] = useState(0)\n    const [end, setEnd] = useState(3)\n    const [blog, setBlog] = useState([])\n    const [hasmore, setHasmore] = useState(true)\n\n    const id = getCookie().token\n    const [login, setLogin] = useState(false)\n\n    const fetchData = () => {\n        setTimeout(() => {\n            setStart(start + 3)\n            setEnd(end + 3)\n        }, 1500);\n    }\n    const handleValidateLogin = () => {\n        if (id) setLogin(null)\n        else setLogin(\"ok\")\n    }\n    const setBlogRes = async (res) => {\n        let a = res.data.data\n        try {\n            for await (let value of a) {\n                setBlog(a => [...a, value])\n            }\n        } catch (error) {\n            return\n        }\n\n    }\n    const handleError = () => {\n        return (\n            <div>\n                Có lỗi đả xảy ra bạn hãy thử lại sau\n            </div>\n        )\n    }\n    useEffect(() => {\n        let fn = () => {\n            if (id) {\n                axios.get(\"http://localhost:2704/api/news/data?start=\" + start + \"&end=\" + end + \"&id=\" + id)\n                    .then(res => {\n                        if (res.data.data !== undefined) setBlogRes(res)\n                        else setHasmore(false)\n                    })\n                    .catch(err => {\n                        handleError()\n                    })\n            } else {\n                axios.get(\"http://localhost:2704/api/news/dataNo?start=\" + start + \"&end=\" + end)\n                    .then(res => {\n                        setBlogRes(res)\n                    })\n                    .catch(err => {\n                        handleError()\n                    })\n            }\n        }\n        fn()\n    }, [end])\n\n    const CommentRender = (cb) => {\n        const { value, i } = cb.props\n        return <>\n            {\n                value.comment[i] !== undefined ? <div className=\"comment_blog\">\n                    <div className=\"content\">\n                        <img alt=\"avatart_user\" src=\"./demo.jpeg\"></img>\n                        <span>{value.comment[i].value}</span>\n                        <div className=\"activities\">\n                            <LikeComment props={{ data: value.comment[i], i: value.comment[i].id + i, value: value.idBlog }} />\n                        </div>\n                    </div>\n\n                </div> : console.log()\n            }\n        </>\n    }\n    return (\n        <div className=\"viewBlog\">\n            {blog.length === 0 && <Skeleton />}\n            {login ? <RequireLogin onClick={(value) => setLogin(value)} /> : console.log()}\n            <InfiniteScroll\n                dataLength={blog.length}\n                next={fetchData}\n                hasMore={hasmore}\n                loader={<Skeleton />}\n            >\n                {\n                    blog !== undefined ? blog.map(function (value, i) {\n                        return (\n                            <div className=\"viewBlog_li\" key={i}>\n                                <div className=\"contain_blog\" >\n                                    <div className=\"profile\">\n                                        <img alt=\"profile_image\" src=\"./demo.jpeg\"></img>\n                                        <div className=\"profile_text\">\n                                            <span>Người tỏa sáng nhất là người cô độc nhất</span>\n                                            <div className=\"text_blog\">\n                                                {\n                                                    value.text.map(function (data, i) {\n                                                        return <p key={i}>{data}</p>\n                                                    })\n                                                }\n                                            </div>\n                                        </div>\n                                    </div>\n                                    {/* Render Image */}\n                                    <div className=\"image-blog\">\n                                        <ImageRender props={{ value }} />\n                                    </div>\n                                    <div className=\"activities_blog\">\n                                        <SeeLike props={{ value, i, className: \"inner\" }} />\n                                        <div className=\"inner\">\n                                            <Link to={\"/posts/id=\" + value.idBlog}>\n                                                <li className=\"comment list\">\n                                                    <ChatBubbleOutlineIcon />   Comment\n                                                </li>\n                                            </Link>\n                                        </div>\n                                        <div className=\"inner share\">\n                                            <ShareBlog />\n                                        </div>\n                                    </div>\n                                    <div className=\"comment_blog_view\">\n                                        <CommentRender props={{ value, i: 0 }} />\n                                        <CommentRender props={{ value, i: 1 }} />\n                                        <CommentRender props={{ value, i: 2 }} />\n                                    </div>\n                                </div>\n                            </div>\n                        )\n                    }) : {}\n                }\n            </InfiniteScroll>\n        </div>\n    )\n}\n\nexport default ViewBlog"]},"metadata":{},"sourceType":"module"}