{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/home/duythai/Developer/sadness/a-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/duythai/Developer/sadness/a-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/duythai/Developer/sadness/a-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import TextField from'@material-ui/core/TextField';import GoogleLogin from'react-google-login';import FacebookLogin from'react-facebook-login';import{makeStyles}from'@material-ui/core/styles';import{authenicate}from\"../../helpers/auth\";import{ToastContainer,toast}from\"react-toastify\";import axios from\"axios\";import{Link,useHistory}from'react-router-dom';var useStyles=makeStyles(function(theme){return{floatingLabelFocusStyle:{color:\"#fff\"}};});function LoginForm(){var classes=useStyles();var history=useHistory();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];// const [redirect, setRedirect] = useStae(false)\nvar email=formData.email,password=formData.password;var handleChange=function handleChange(text){return function(e){setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},text,e.target.value)));};};var handleSubmit=function handleSubmit(e){e.preventDefault();if(email&&password){axios.post(\"http://localhost:2704/api/login\",{email:email,password:password}).then(function(res){setFormData(_objectSpread(_objectSpread({},formData),{},{email:\"\",password:\"\"}));toast.success(res.data.message);if(res.data.blockN>3){history.push(\"/report\");}authenicate(res);window.location.reload(false);}).catch(function(err){toast.error(\"Có lỗi đã xảy ra bạn hãy thử lại sau\");});}else{toast.error(\"Please fill all text field\");}};var sendGoogleToken=function sendGoogleToken(tokenId){axios.post(\"http://localhost:2704/api/googlelogin\",{idToken:tokenId}).then(function(res){authenicate(res);window.location.reload(false);}).catch(function(err){toast.error(\"Login with Google failed\");});};var sendFacebookToken=function sendFacebookToken(userID,accessToken){axios.post(\"http://localhost:2704/api/facebooklogin\",{userID:userID,accessToken:accessToken}).then(function(res){authenicate(res);window.location.reload(false);}).catch(function(err){toast.error(\"Login with Facebook failed\");});};var responseGoogle=function responseGoogle(response){sendGoogleToken(response.tokenId);};var responseFacebook=function responseFacebook(response){console.log(response);sendFacebookToken(response.userID,response.accessToken);};return/*#__PURE__*/_jsxs(\"form\",{className:\"form_signIn\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(\"p\",{className:\"sign_in_title\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"div\",{className:\"inputField\",children:/*#__PURE__*/_jsx(TextField,{value:email,onChange:handleChange(\"email\"),id:\"outlined-basic\",label:\"Email\",variant:\"outlined\",InputLabelProps:{className:classes.floatingLabelFocusStyle}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputField\",children:[/*#__PURE__*/_jsx(TextField,{value:password,onChange:handleChange(\"password\"),id:\"outlined-password-input\",label:\"Password\",type:\"password\",autoComplete:\"current-password\",variant:\"outlined\",InputLabelProps:{className:classes.floatingLabelFocusStyle}}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-sign\",children:[/*#__PURE__*/_jsx(Link,{to:\"/users/forget\",children:\"Qu\\xEAn m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(\"button\",{className:\"treat-button\",type:\"submit\",children:\"\\u0110\\u0103ng nh\\u1EADp\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"divider\"}),/*#__PURE__*/_jsx(GoogleLogin,{className:\"google_login\",clientId:\"583969708221-h0kl5ki0e91mkb3mafoecak1sj8b4ih3.apps.googleusercontent.com\",buttonText:\"Login with Google\",onSuccess:responseGoogle,cookiePolicy:'single_host_origin'}),/*#__PURE__*/_jsx(FacebookLogin,{appId:\"688117411891893\",fields:\"name,email,picture\",callback:responseFacebook,cssClass:\"facebook_login\",icon:\"fa-facebook\"})]});}export default LoginForm;","map":{"version":3,"sources":["/home/duythai/Developer/sadness/a-client/src/component/loginComponent/LoginForm.js"],"names":["React","useState","TextField","GoogleLogin","FacebookLogin","makeStyles","authenicate","ToastContainer","toast","axios","Link","useHistory","useStyles","theme","floatingLabelFocusStyle","color","LoginForm","classes","history","email","password","formData","setFormData","handleChange","text","e","target","value","handleSubmit","preventDefault","post","then","res","success","data","message","blockN","push","window","location","reload","catch","err","error","sendGoogleToken","tokenId","idToken","sendFacebookToken","userID","accessToken","responseGoogle","response","responseFacebook","console","log","className"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport TextField from '@material-ui/core/TextField';\nimport GoogleLogin from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { authenicate } from \"../../helpers/auth\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport { Link, useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n    floatingLabelFocusStyle: {\n        color: \"#fff\"\n    }\n}));\n\nfunction LoginForm() {\n    const classes = useStyles();\n    const history = useHistory();\n    const [formData, setFormData] = useState({\n        email: \"\",\n        password: \"\"\n    })\n    // const [redirect, setRedirect] = useStae(false)\n    const { email, password } = formData;\n    const handleChange = text => e => {\n        setFormData({ ...formData, [text]: e.target.value })\n    }\n    const handleSubmit = e => {\n        e.preventDefault();\n        if (email && password) {\n            axios.post(`http://localhost:2704/api/login`, {\n                email, password\n            }).then(res => {\n                setFormData({\n                    ...formData,\n                    email: \"\",\n                    password: \"\"\n                });\n                toast.success(res.data.message);\n                if (res.data.blockN > 3) {\n                    history.push(\"/report\")\n                }\n                authenicate(res);\n                window.location.reload(false);\n            }).catch(err => {\n                toast.error(\"Có lỗi đã xảy ra bạn hãy thử lại sau\")\n            })\n        }\n        else {\n            toast.error(\"Please fill all text field\")\n        }\n    }\n    const sendGoogleToken = tokenId => {\n        axios.post(\"http://localhost:2704/api/googlelogin\", {\n            idToken: tokenId\n        }).then(res => {\n            authenicate(res)\n            window.location.reload(false);\n        }).catch(err => {\n            toast.error(\"Login with Google failed\")\n        })\n    }\n    const sendFacebookToken = (userID, accessToken) => {\n        axios.post(\"http://localhost:2704/api/facebooklogin\", {\n            userID, accessToken\n        }).then(res => {\n            authenicate(res)\n            window.location.reload(false);\n        }).catch(err => {\n            toast.error(\"Login with Facebook failed\")\n        })\n    }\n    const responseGoogle = response => {\n        sendGoogleToken(response.tokenId)\n    }\n    const responseFacebook = response => {\n        console.log(response)\n        sendFacebookToken(response.userID, response.accessToken)\n    }\n    return (\n        <form className=\"form_signIn\" onSubmit={handleSubmit}>\n            <ToastContainer />\n            <p className=\"sign_in_title\">Sign In</p>\n            <div className=\"inputField\">\n                <TextField\n                    value={email}\n                    onChange={handleChange(\"email\")}\n                    id=\"outlined-basic\"\n                    label=\"Email\"\n                    variant=\"outlined\"\n                    InputLabelProps={{\n                        className: classes.floatingLabelFocusStyle,\n                    }}\n                />\n            </div>\n            <div className=\"inputField\">\n                <TextField\n                    value={password}\n                    onChange={handleChange(\"password\")}\n                    id=\"outlined-password-input\"\n                    label=\"Password\"\n                    type=\"password\"\n                    autoComplete=\"current-password\"\n                    variant=\"outlined\"\n                    InputLabelProps={{\n                        className: classes.floatingLabelFocusStyle,\n                    }}\n                />\n                <div className=\"button-sign\">\n                    <Link to=\"/users/forget\">Quên mật khẩu</Link>\n                    <button className=\"treat-button\" type=\"submit\">Đăng nhập</button>\n                </div>\n            </div>\n            <div className=\"divider\"></div>\n            <GoogleLogin\n                className=\"google_login\"\n                clientId=\"583969708221-h0kl5ki0e91mkb3mafoecak1sj8b4ih3.apps.googleusercontent.com\"\n                buttonText=\"Login with Google\"\n                onSuccess={responseGoogle}\n                cookiePolicy={'single_host_origin'}\n            />\n            <FacebookLogin\n                appId=\"688117411891893\"\n                fields=\"name,email,picture\"\n                callback={responseFacebook}\n                cssClass=\"facebook_login\"\n                icon=\"fa-facebook\"\n            />\n        </form>\n\n    )\n}\n\nexport default LoginForm\n"]},"metadata":{},"sourceType":"module"}