{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import _slicedToArray from\"/home/duythai/Developer/sadness/a-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{useRef,useState,useContext}from\"react\";import socketApp from\"../socket\";import IconButton from'@material-ui/core/IconButton';import{encryptTo,getCookie}from\"./auth\";import Menu from'@material-ui/core/Menu';import\"../component/style/chat.css\";import{emoji}from\"./emoji\";import{MessageList}from\"../userContext\";import ContactContain from\"../component/chatComponent/miniChatCom/contactContain\";import RenderChat from\"../component/chatComponent/renderChat\";import ArrowBackIosIcon from'@material-ui/icons/ArrowBackIos';import ExpandLessIcon from'@material-ui/icons/ExpandLess';import ExpandMoreIcon from'@material-ui/icons/ExpandMore';var userId=getCookie().token;var socket=socketApp.getSocket();export var handleFileUpload=function handleFileUpload(e,userId,id){var file=e.target.files;var reader=new FileReader();for(var i=0;i<file.length;i++){reader.readAsDataURL(file[i]);reader.onloadend=function(){socket.emit(\"sendImageOff\",{room:id,image:reader.result,userId:userId});};}};export var messageLiImageRender=function messageLiImageRender(value,i,imgUrl,myRef){return/*#__PURE__*/_jsxs(\"li\",{ref:myRef,className:\"messageImage \"+value,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:i}),/*#__PURE__*/_jsx(\"label\",{htmlFor:i,children:/*#__PURE__*/_jsx(\"img\",{className:value,alt:\"\",src:imgUrl})})]},i);};export var messageLiRender=function messageLiRender(li,one,two,msgs,i,myRef){return/*#__PURE__*/_jsx(\"li\",{className:li,ref:myRef,children:msgs.length>60?/*#__PURE__*/_jsx(\"div\",{className:one,dangerouslySetInnerHTML:{__html:msgs}}):/*#__PURE__*/_jsx(\"div\",{className:two,dangerouslySetInnerHTML:{__html:msgs}})},i);};export var executeScroll=function executeScroll(myRef){try{myRef.current.scrollIntoView();}catch(error){}};export var Spinning=function Spinning(){return/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"});};export var FormSend=function FormSend(props){var id=props.id,userId=props.userId;var fileRef=useRef(null);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),anchorEl=_useState4[0],setAnchorEl=_useState4[1];var handleSubmit=function handleSubmit(e){e.preventDefault();setMessage(\"\");if(message){var value=encryptTo(message);socket.emit('sendMessageOff',{room:id,message:value,userId:userId});}};var emojiSubmit=function emojiSubmit(e,emo){e.preventDefault();var value=encryptTo(\"&#\"+emo+\";\");socket.emit('sendMessageOff',{room:id,message:value,userId:userId});handleClose();};var useRefTrigger=function useRefTrigger(){fileRef.current.click();};var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};return/*#__PURE__*/_jsx(\"form\",{className:\"formMessage\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"div\",{className:\"formMessage_div\",children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{value:message,className:\"input\",onChange:function onChange(e){return setMessage(e.target.value);},type:\"text\",placeholder:\"Enter text\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"extension_input\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"icon_button_file\",type:\"file\",onChange:function onChange(e){return handleFileUpload(e,userId,id);},ref:fileRef}),/*#__PURE__*/_jsx(\"div\",{className:\"inner_title\",children:/*#__PURE__*/_jsx(IconButton,{className:\"image_upload_message_icon\",onClick:useRefTrigger,children:/*#__PURE__*/_jsx(\"img\",{alt:\"image_upload_icon\",src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAADRUlEQVRIieWVz28bRRTHP7M7dvCPNg0kEWDTQ+khJ6SqF/4CqnIgElIlzsgK4sQBFSFOuXFAnHKJUg5ISOWHIqQQEaFarUoVVaitgdRBdROJipA6tfMDJ66drO2Z10NIm3XsOHZygq+02pk3b95n3uzbGfi/STUbSCQSrzmOMwQUlVJ3RWQWyIyNjVWPFHz+/IU+48gFgZOA7o6G3leKcJ2/sVbWrMiyMXZ5+y3LNWM29gRWbIniZnJy/EpT8Llzb7+kunRaKdUTCUeqIA4QaDMJASwoAZGaMZRK5QDCp8mp8U/qnTWA0e67IR048eEH7znRSLirTeDuJNzdhqvXp7l6ffrjRGJIKyU3YrHY1PDwsH0KViLxnp5uFY2EcSPHCL7Qh3KcDvlgvS22clnisZcRQVlrL2rtXMxms58BHwHsiR7s7UdpDY7T8eOEwujjJxqt6c2dhh+sFMp193h3IsfVjcwLjcGtgqmmf99Bld5pNFxWI0UDmng0RNVYHhTLWJG2qUqpp+ADZxzWLgoIug7a6Tjz9sFrXoWCVyW36VExFoCKNcyv5w8aohYMBjM7nQNvdc0KS+Utn+3aYoa59Tzdr4boDx9rFeL+yMiIt9NpmbEV29A+V8hx759HGGv5cSGNZ2qtQqV3d1qCLyd/4Ne5WZ+t4G2SXLzn7/+dqZ/aOXg6fYfbmbt8nZxkIZcFQET4aeEPKsb4fOfXc8ysLDaNtbui9wU/XMkxcSMJQMVUuTT5LYXHG9zM/clSeb3hnJ+X5smVix2ARRBr8aoVvpwap2KeXb0b5SJfXJvgdv6vplnt/t5ifTtSGh0d9U3cU9XV1Tzfz9wiX1j12V2t4cVepMXBse5tknr0gDM1X04Ztq/N5uBacYPBUwMMnhrYF7CvPEF4lrG1cr/epfO7rw2J0BwsIoe+AZqpVrPNwUqp9k/9A6pU8pqAHYy1jU+ow2inEMtiV+vHtovL8vvK6hq/zczS39d7JFBrLb/cSuG6TvX1MwMPr0z4xxXA2bNDgb5YYdwY+9aRUP+V6zocD3dd+u6br4bqxzRAKjVWJcXgG4PvvELN9HcKei6onw+FgqddR53WrorrgHvnZDz++WEW/9/REz15Yuu7CLn4AAAAAElFTkSuQmCC\"})})}),/*#__PURE__*/_jsx(IconButton,{\"aria-controls\":\"simple_menu_emoji\",\"aria-haspopup\":\"true\",onClick:handleClick,children:/*#__PURE__*/_jsx(\"img\",{alt:\"emoji_image\",src:\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABmJLR0QA/wD/AP+gvaeTAAAC/klEQVRIie2SX2jVdRjGn+9vO5PTFuMcK9ESFHXIiiQmjUDCYDbXRX9uRjACwwuhP8JCuoiiIxRUohdBfxbDi9kIpIv+UyAhrjDoJGp6IVoMzTnz7HjmdP9+7/M+XvzOOW47u/Vuz9WX7/t+n8/L+3yBJS3pbilUDkeem2iNQpR2V9zxXdPpuU0/dU201kVMOzXW9XNm+HBHsTnFaH2lTnA6Jm6cO5a9nEPwhZDoziF8IikfAk4defbm9sr9j8+UNst1Jo5DPrbwKgA0ePSBpDxdeTPlGYczwcLFlieKxUOPF74cbP9/w6KQENDrAkkhNvVW7mVhL12B1FWa3gcAc6VIgJToum7UJF0g1eyOntjCiYNthfYayFPfNJ10qp8U3PX0953XN327rbSZVBcpOH3PC0czJQAwA8qm4y/+ns32HF/eCNo60gdIwUxNNsuDOSiaB0mm9rdIjZGCW9jtjvdIBad+e/5oZrDaRwcpkKq+7flzxb/Df93/Mqk/yrXWBzZeeawGsv2X5qI79pabXqKpk4RReiUgVB1tEQgA5BDcXANWrsUeHqmBAMD0rRv9pCZJpMpGQ93Hsn/P7SEBWwQCAIw1QiqpGxoXhYSGxl5S91AaJwW6tg60F7fMMzKBlhgtVExfa5YM4NRoDeTrJ8c30PB2kom/Q2KIVHDj531tSlUhQrIuW7Curap3+k53QQ5rSIWheRBBYTa2T0mlSY3Wh6l+M99nycQPByu8Xum12GEUjHfeHlh3aX3T8MiglOSACF/svrDy2jzIV+3FHU51lL/gh93HV0/tOHHfD6ROJuvx3GcthQeTTCrBe/P+tZeL+9eM3HJG5wF0l+1+jWLfU/GOAGBwSyljrn3JdBptXDbdBwABQTH93SREv3c2zH5UzmTGzEEqSMgASAMQgFNBeO3mmlWdb/y3eqqaMwD0tSm1TIVHYwA+U3dt19nsxbm7/rjl6iaR9TOhrvTmhRX/HHjoUjpEDSsrdU9ZPDEVxnIjqyZrfsKSlnRXdRsr+i4fv8vwiwAAAABJRU5ErkJggg==\"})}),/*#__PURE__*/_jsx(Menu,{id:\"simple_menu_emoji\",anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:handleClose,children:emoji.map(function(emo,i){return/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(e){return emojiSubmit(e,emo);},dangerouslySetInnerHTML:{__html:\"&#\"+emo+\";\"}},i);})})]})]})})});};export var MessageContainer=function MessageContainer(){var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),room=_useState6[0],setRoom=_useState6[1];var _useContext=useContext(MessageList),listMessage=_useContext.listMessage;var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),open=_useState8[0],setOpen=_useState8[1];var hanldeSetRoom=function hanldeSetRoom(value){var id=value.split(\",\");setRoom(id[0]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"accordion_div\",style:open===true?{height:\"450px\"}:{height:\"initial\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"accordion_header\",children:[room?/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(e){return setRoom(null);},children:/*#__PURE__*/_jsx(ArrowBackIosIcon,{})}):console.log(),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(e){return setOpen(!open);},className:\"accordion_message\",children:/*#__PURE__*/_jsxs(IconButton,{children:[\"Message\",open===false?/*#__PURE__*/_jsx(\"span\",{className:\"sympol\",children:/*#__PURE__*/_jsx(ExpandLessIcon,{})}):/*#__PURE__*/_jsx(\"span\",{className:\"sympol\",children:/*#__PURE__*/_jsx(ExpandMoreIcon,{})})]})})]}),/*#__PURE__*/_jsx(\"div\",{style:open===true?{display:\"block\"}:{display:\"none\"},className:\"accordion_data\",children:room?/*#__PURE__*/_jsx(RenderChat,{id:room,userId:userId}):listMessage&&listMessage.length>0?listMessage.map(function(val,i){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ContactContain,{onClick:function onClick(value){return hanldeSetRoom(value);},message:val.data,users:val.user,idRoom:val.idRoom,target:room,nread:val.nread})},i);}):console.log()})]});};","map":{"version":3,"sources":["/home/duythai/Developer/sadness/a-client/src/helpers/message.js"],"names":["useRef","useState","useContext","socketApp","IconButton","encryptTo","getCookie","Menu","emoji","MessageList","ContactContain","RenderChat","ArrowBackIosIcon","ExpandLessIcon","ExpandMoreIcon","userId","token","socket","getSocket","handleFileUpload","e","id","file","target","files","reader","FileReader","i","length","readAsDataURL","onloadend","emit","room","image","result","messageLiImageRender","value","imgUrl","myRef","messageLiRender","li","one","two","msgs","__html","executeScroll","current","scrollIntoView","error","Spinning","FormSend","props","fileRef","message","setMessage","anchorEl","setAnchorEl","handleSubmit","preventDefault","emojiSubmit","emo","handleClose","useRefTrigger","click","handleClick","event","currentTarget","Boolean","map","MessageContainer","setRoom","listMessage","open","setOpen","hanldeSetRoom","split","height","console","log","display","val","data","user","idRoom","nread"],"mappings":"4SAAA,OAASA,MAAT,CAAiBC,QAAjB,CAA2BC,UAA3B,KAA6C,OAA7C,CACA,MAAOC,CAAAA,SAAP,KAAsB,WAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,OAASC,SAAT,CAAoBC,SAApB,KAAqC,QAArC,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAO,6BAAP,CACA,OAASC,KAAT,KAAsB,SAAtB,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,MAAOC,CAAAA,cAAP,KAA2B,uDAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,uCAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,iCAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,+BAA3B,CACA,MAAOC,CAAAA,cAAP,KAA2B,+BAA3B,CAEA,GAAMC,CAAAA,MAAM,CAAGT,SAAS,GAAGU,KAA3B,CACA,GAAIC,CAAAA,MAAM,CAAGd,SAAS,CAACe,SAAV,EAAb,CAEA,MAAO,IAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,CAAD,CAAIL,MAAJ,CAAYM,EAAZ,CAAmB,CAC/C,GAAIC,CAAAA,IAAI,CAAGF,CAAC,CAACG,MAAF,CAASC,KAApB,CACA,GAAIC,CAAAA,MAAM,CAAG,GAAIC,CAAAA,UAAJ,EAAb,CACA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,IAAI,CAACM,MAAzB,CAAiCD,CAAC,EAAlC,CAAsC,CAClCF,MAAM,CAACI,aAAP,CAAqBP,IAAI,CAACK,CAAD,CAAzB,EACAF,MAAM,CAACK,SAAP,CAAmB,UAAM,CACrBb,MAAM,CAACc,IAAP,CAAY,cAAZ,CAA4B,CAAEC,IAAI,CAAEX,EAAR,CAAYY,KAAK,CAAER,MAAM,CAACS,MAA1B,CAAkCnB,MAAM,CAANA,MAAlC,CAA5B,EACH,CAFD,CAGH,CACJ,CATM,CAUP,MAAO,IAAMoB,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,KAAD,CAAQT,CAAR,CAAWU,MAAX,CAAmBC,KAAnB,CAA6B,CAC7D,mBACI,YACI,GAAG,CAAEA,KADT,CAGI,SAAS,CAAE,gBAAkBF,KAHjC,wBAII,cAAO,IAAI,CAAC,UAAZ,CAAuB,EAAE,CAAET,CAA3B,EAJJ,cAKI,cAAO,OAAO,CAAEA,CAAhB,uBACI,YAAK,SAAS,CAAES,KAAhB,CAAuB,GAAG,CAAC,EAA3B,CAA8B,GAAG,CAAEC,MAAnC,EADJ,EALJ,GAESV,CAFT,CADJ,CAWH,CAZM,CAaP,MAAO,IAAMY,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,EAAD,CAAKC,GAAL,CAAUC,GAAV,CAAeC,IAAf,CAAqBhB,CAArB,CAAwBW,KAAxB,CAAkC,CAC7D,mBACI,WAAI,SAAS,CAAEE,EAAf,CAEI,GAAG,CAAEF,KAFT,UAIMK,IAAI,CAACf,MAAL,CAAc,EAAd,cACE,YAAK,SAAS,CAAEa,GAAhB,CAAqB,uBAAuB,CAAE,CAAEG,MAAM,CAAED,IAAV,CAA9C,EADF,cAGE,YAAK,SAAS,CAAED,GAAhB,CAAqB,uBAAuB,CAAE,CAAEE,MAAM,CAAED,IAAV,CAA9C,EAPR,EACShB,CADT,CADJ,CAaH,CAdM,CAeP,MAAO,IAAMkB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACP,KAAD,CAAW,CACpC,GAAI,CACAA,KAAK,CAACQ,OAAN,CAAcC,cAAd,GACH,CAAC,MAAOC,KAAP,CAAc,CACf,CACJ,CALM,CAMP,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAC1B,mBACI,YAAK,SAAS,CAAC,SAAf,EADJ,CAGH,CAJM,CAKP,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,IACzB9B,CAAAA,EADyB,CACV8B,KADU,CACzB9B,EADyB,CACrBN,MADqB,CACVoC,KADU,CACrBpC,MADqB,CAE/B,GAAMqC,CAAAA,OAAO,CAAGpD,MAAM,CAAC,IAAD,CAAtB,CAF+B,cAGDC,QAAQ,CAAC,EAAD,CAHP,wCAGxBoD,OAHwB,eAGfC,UAHe,8BAICrD,QAAQ,CAAC,IAAD,CAJT,yCAIxBsD,QAJwB,eAIdC,WAJc,eAM/B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAArC,CAAC,CAAI,CACtBA,CAAC,CAACsC,cAAF,GACAJ,UAAU,CAAC,EAAD,CAAV,CACA,GAAID,OAAJ,CAAa,CACT,GAAIjB,CAAAA,KAAK,CAAG/B,SAAS,CAACgD,OAAD,CAArB,CACApC,MAAM,CAACc,IAAP,CAAY,gBAAZ,CAA8B,CAAEC,IAAI,CAAEX,EAAR,CAAYgC,OAAO,CAAEjB,KAArB,CAA4BrB,MAAM,CAANA,MAA5B,CAA9B,EACH,CACJ,CAPD,CAQA,GAAM4C,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACvC,CAAD,CAAIwC,GAAJ,CAAY,CAC5BxC,CAAC,CAACsC,cAAF,GACA,GAAItB,CAAAA,KAAK,CAAG/B,SAAS,CAAC,KAAOuD,GAAP,CAAa,GAAd,CAArB,CACA3C,MAAM,CAACc,IAAP,CAAY,gBAAZ,CAA8B,CAAEC,IAAI,CAAEX,EAAR,CAAYgC,OAAO,CAAEjB,KAArB,CAA4BrB,MAAM,CAANA,MAA5B,CAA9B,EACA8C,WAAW,GACd,CALD,CAMA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxBV,OAAO,CAACN,OAAR,CAAgBiB,KAAhB,GACH,CAFD,CAGA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC3BT,WAAW,CAACS,KAAK,CAACC,aAAP,CAAX,CACH,CAFD,CAIA,GAAML,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtBL,WAAW,CAAC,IAAD,CAAX,CACH,CAFD,CAIA,mBACI,aAAM,SAAS,CAAC,aAAhB,CACI,QAAQ,CAAEC,YADd,uBAEI,YAAK,SAAS,CAAC,iBAAf,uBACI,wCACI,cACI,KAAK,CAAEJ,OADX,CAEI,SAAS,CAAC,OAFd,CAGI,QAAQ,CAAE,kBAACjC,CAAD,QAAOkC,CAAAA,UAAU,CAAClC,CAAC,CAACG,MAAF,CAASa,KAAV,CAAjB,EAHd,CAII,IAAI,CAAC,MAJT,CAKI,WAAW,CAAC,YALhB,EADJ,cAQI,aAAK,SAAS,CAAC,iBAAf,wBACI,cACI,EAAE,CAAC,kBADP,CAEI,IAAI,CAAC,MAFT,CAGI,QAAQ,CAAE,kBAAChB,CAAD,QAAOD,CAAAA,gBAAgB,CAACC,CAAD,CAAIL,MAAJ,CAAYM,EAAZ,CAAvB,EAHd,CAII,GAAG,CAAE+B,OAJT,EADJ,cAOI,YAAK,SAAS,CAAC,aAAf,uBACI,KAAC,UAAD,EAAY,SAAS,CAAC,2BAAtB,CAAkD,OAAO,CAAEU,aAA3D,uBACI,YAAK,GAAG,CAAC,mBAAT,CAA6B,GAAG,CAAC,wtCAAjC,EADJ,EADJ,EAPJ,cAYI,KAAC,UAAD,EAAY,gBAAc,mBAA1B,CAA8C,gBAAc,MAA5D,CAAmE,OAAO,CAAEE,WAA5E,uBACI,YAAK,GAAG,CAAC,aAAT,CAAuB,GAAG,CAAC,4nCAA3B,EADJ,EAZJ,cAeI,KAAC,IAAD,EACI,EAAE,CAAC,mBADP,CAEI,QAAQ,CAAET,QAFd,CAGI,WAAW,KAHf,CAII,IAAI,CAAEY,OAAO,CAACZ,QAAD,CAJjB,CAKI,OAAO,CAAEM,WALb,UAOKrD,KAAK,CAAC4D,GAAN,CAAU,SAAUR,GAAV,CAAejC,CAAf,CAAkB,CACzB,mBAAQ,aAAc,OAAO,CAAE,iBAACP,CAAD,QAAOuC,CAAAA,WAAW,CAACvC,CAAD,CAAIwC,GAAJ,CAAlB,EAAvB,CAAmD,uBAAuB,CAAE,CAAEhB,MAAM,CAAE,KAAOgB,GAAP,CAAa,GAAvB,CAA5E,EAAWjC,CAAX,CAAR,CACH,CAFA,CAPL,EAfJ,GARJ,GADJ,EAFJ,EADJ,CA2CH,CA1EM,CA4EP,MAAO,IAAM0C,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,gBACVpE,QAAQ,CAAC,IAAD,CADE,yCAC3B+B,IAD2B,eACrBsC,OADqB,+BAEVpE,UAAU,CAACO,WAAD,CAFA,CAE1B8D,WAF0B,aAE1BA,WAF0B,gBAGVtE,QAAQ,CAAC,KAAD,CAHE,yCAG3BuE,IAH2B,eAGrBC,OAHqB,eAKlC,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAtC,KAAK,CAAI,CAC3B,GAAIf,CAAAA,EAAE,CAAGe,KAAK,CAACuC,KAAN,CAAY,GAAZ,CAAT,CACAL,OAAO,CAACjD,EAAE,CAAC,CAAD,CAAH,CAAP,CACH,CAHD,CAKA,mBACI,aAAK,SAAS,CAAC,eAAf,CAA+B,KAAK,CAAEmD,IAAI,GAAK,IAAT,CAAgB,CAAEI,MAAM,CAAE,OAAV,CAAhB,CAAsC,CAAEA,MAAM,CAAE,SAAV,CAA5E,wBACI,aAAK,SAAS,CAAC,kBAAf,WACK5C,IAAI,cAAG,KAAC,UAAD,EAAY,OAAO,CAAE,iBAAAZ,CAAC,QAAIkD,CAAAA,OAAO,CAAC,IAAD,CAAX,EAAtB,uBACJ,KAAC,gBAAD,IADI,EAAH,CAEWO,OAAO,CAACC,GAAR,EAHpB,cAII,YAAK,OAAO,CAAE,iBAAA1D,CAAC,QAAIqD,CAAAA,OAAO,CAAC,CAACD,IAAF,CAAX,EAAf,CAAmC,SAAS,CAAC,mBAA7C,uBACI,MAAC,UAAD,sBAEKA,IAAI,GAAK,KAAT,cACG,aAAM,SAAS,CAAC,QAAhB,uBACI,KAAC,cAAD,IADJ,EADH,cAIG,aAAM,SAAS,CAAC,QAAhB,uBACI,KAAC,cAAD,IADJ,EANR,GADJ,EAJJ,GADJ,cAoBI,YAAK,KAAK,CAAEA,IAAI,GAAK,IAAT,CAAgB,CAAEO,OAAO,CAAE,OAAX,CAAhB,CAAuC,CAAEA,OAAO,CAAE,MAAX,CAAnD,CAAwE,SAAS,CAAC,gBAAlF,UACK/C,IAAI,cAAG,KAAC,UAAD,EAAY,EAAE,CAAEA,IAAhB,CAAsB,MAAM,CAAEjB,MAA9B,EAAH,CAA8CwD,WAAW,EAAIA,WAAW,CAAC3C,MAAZ,CAAqB,CAApC,CAAwC2C,WAAW,CAACH,GAAZ,CAAgB,SAACY,GAAD,CAAMrD,CAAN,qBAAY,kCACnH,KAAC,cAAD,EACI,OAAO,CAAE,iBAACS,KAAD,QAAWsC,CAAAA,aAAa,CAACtC,KAAD,CAAxB,EADb,CAEI,OAAO,CAAE4C,GAAG,CAACC,IAFjB,CAGI,KAAK,CAAED,GAAG,CAACE,IAHf,CAII,MAAM,CAAEF,GAAG,CAACG,MAJhB,CAKI,MAAM,CAAEnD,IALZ,CAMI,KAAK,CAAEgD,GAAG,CAACI,KANf,EADmH,EAAUzD,CAAV,CAAZ,EAAhB,CAAxC,CAU/CkD,OAAO,CAACC,GAAR,EAXR,EApBJ,GADJ,CAqCH,CA/CM","sourcesContent":["import { useRef, useState, useContext } from \"react\"\nimport socketApp from \"../socket\";\nimport IconButton from '@material-ui/core/IconButton';\nimport { encryptTo, getCookie } from \"./auth\";\nimport Menu from '@material-ui/core/Menu';\nimport \"../component/style/chat.css\"\nimport { emoji } from \"./emoji\";\nimport { MessageList } from \"../userContext\";\nimport ContactContain from \"../component/chatComponent/miniChatCom/contactContain\";\nimport RenderChat from \"../component/chatComponent/renderChat\";\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nconst userId = getCookie().token;\nlet socket = socketApp.getSocket();\n\nexport const handleFileUpload = (e, userId, id) => {\n    let file = e.target.files;\n    let reader = new FileReader()\n    for (let i = 0; i < file.length; i++) {\n        reader.readAsDataURL(file[i])\n        reader.onloadend = () => {\n            socket.emit(\"sendImageOff\", { room: id, image: reader.result, userId })\n        }\n    }\n}\nexport const messageLiImageRender = (value, i, imgUrl, myRef) => {\n    return (\n        <li\n            ref={myRef}\n            key={i}\n            className={\"messageImage \" + value}>\n            <input type=\"checkbox\" id={i}></input>\n            <label htmlFor={i}>\n                <img className={value} alt=\"\" src={imgUrl}></img>\n            </label>\n        </li>\n    )\n}\nexport const messageLiRender = (li, one, two, msgs, i, myRef) => {\n    return (\n        <li className={li}\n            key={i}\n            ref={myRef}\n        >\n            { msgs.length > 60 ?\n                <div className={one} dangerouslySetInnerHTML={{ __html: msgs }}>\n                </div> :\n                <div className={two} dangerouslySetInnerHTML={{ __html: msgs }}>\n                </div>\n            }\n        </li>\n    )\n}\nexport const executeScroll = (myRef) => {\n    try {\n        myRef.current.scrollIntoView()\n    } catch (error) {\n    }\n}\nexport const Spinning = () => {\n    return (\n        <div className=\"spinner\"></div>\n    )\n}\nexport const FormSend = (props) => {\n    let { id, userId } = props\n    const fileRef = useRef(null);\n    const [message, setMessage] = useState(\"\")\n    const [anchorEl, setAnchorEl] = useState(null);\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        setMessage(\"\")\n        if (message) {\n            let value = encryptTo(message)\n            socket.emit('sendMessageOff', { room: id, message: value, userId });\n        }\n    }\n    const emojiSubmit = (e, emo) => {\n        e.preventDefault()\n        let value = encryptTo(\"&#\" + emo + \";\")\n        socket.emit('sendMessageOff', { room: id, message: value, userId });\n        handleClose()\n    }\n    const useRefTrigger = () => {\n        fileRef.current.click()\n    }\n    const handleClick = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    return (\n        <form className=\"formMessage\"\n            onSubmit={handleSubmit}>\n            <div className=\"formMessage_div\">\n                <>\n                    <input\n                        value={message}\n                        className=\"input\"\n                        onChange={(e) => setMessage(e.target.value)}\n                        type=\"text\"\n                        placeholder=\"Enter text\" >\n                    </input>\n                    <div className=\"extension_input\">\n                        <input\n                            id=\"icon_button_file\"\n                            type=\"file\"\n                            onChange={(e) => handleFileUpload(e, userId, id)}\n                            ref={fileRef}\n                        />\n                        <div className=\"inner_title\">\n                            <IconButton className=\"image_upload_message_icon\" onClick={useRefTrigger}>\n                                <img alt=\"image_upload_icon\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QA/wD/AP+gvaeTAAADRUlEQVRIieWVz28bRRTHP7M7dvCPNg0kEWDTQ+khJ6SqF/4CqnIgElIlzsgK4sQBFSFOuXFAnHKJUg5ISOWHIqQQEaFarUoVVaitgdRBdROJipA6tfMDJ66drO2Z10NIm3XsOHZygq+02pk3b95n3uzbGfi/STUbSCQSrzmOMwQUlVJ3RWQWyIyNjVWPFHz+/IU+48gFgZOA7o6G3leKcJ2/sVbWrMiyMXZ5+y3LNWM29gRWbIniZnJy/EpT8Llzb7+kunRaKdUTCUeqIA4QaDMJASwoAZGaMZRK5QDCp8mp8U/qnTWA0e67IR048eEH7znRSLirTeDuJNzdhqvXp7l6ffrjRGJIKyU3YrHY1PDwsH0KViLxnp5uFY2EcSPHCL7Qh3KcDvlgvS22clnisZcRQVlrL2rtXMxms58BHwHsiR7s7UdpDY7T8eOEwujjJxqt6c2dhh+sFMp193h3IsfVjcwLjcGtgqmmf99Bld5pNFxWI0UDmng0RNVYHhTLWJG2qUqpp+ADZxzWLgoIug7a6Tjz9sFrXoWCVyW36VExFoCKNcyv5w8aohYMBjM7nQNvdc0KS+Utn+3aYoa59Tzdr4boDx9rFeL+yMiIt9NpmbEV29A+V8hx759HGGv5cSGNZ2qtQqV3d1qCLyd/4Ne5WZ+t4G2SXLzn7/+dqZ/aOXg6fYfbmbt8nZxkIZcFQET4aeEPKsb4fOfXc8ysLDaNtbui9wU/XMkxcSMJQMVUuTT5LYXHG9zM/clSeb3hnJ+X5smVix2ARRBr8aoVvpwap2KeXb0b5SJfXJvgdv6vplnt/t5ifTtSGh0d9U3cU9XV1Tzfz9wiX1j12V2t4cVepMXBse5tknr0gDM1X04Ztq/N5uBacYPBUwMMnhrYF7CvPEF4lrG1cr/epfO7rw2J0BwsIoe+AZqpVrPNwUqp9k/9A6pU8pqAHYy1jU+ow2inEMtiV+vHtovL8vvK6hq/zczS39d7JFBrLb/cSuG6TvX1MwMPr0z4xxXA2bNDgb5YYdwY+9aRUP+V6zocD3dd+u6br4bqxzRAKjVWJcXgG4PvvELN9HcKei6onw+FgqddR53WrorrgHvnZDz++WEW/9/REz15Yuu7CLn4AAAAAElFTkSuQmCC\" />\n                            </IconButton>\n                        </div>\n                        <IconButton aria-controls=\"simple_menu_emoji\" aria-haspopup=\"true\" onClick={handleClick}>\n                            <img alt=\"emoji_image\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABmJLR0QA/wD/AP+gvaeTAAAC/klEQVRIie2SX2jVdRjGn+9vO5PTFuMcK9ESFHXIiiQmjUDCYDbXRX9uRjACwwuhP8JCuoiiIxRUohdBfxbDi9kIpIv+UyAhrjDoJGp6IVoMzTnz7HjmdP9+7/M+XvzOOW47u/Vuz9WX7/t+n8/L+3yBJS3pbilUDkeem2iNQpR2V9zxXdPpuU0/dU201kVMOzXW9XNm+HBHsTnFaH2lTnA6Jm6cO5a9nEPwhZDoziF8IikfAk4defbm9sr9j8+UNst1Jo5DPrbwKgA0ePSBpDxdeTPlGYczwcLFlieKxUOPF74cbP9/w6KQENDrAkkhNvVW7mVhL12B1FWa3gcAc6VIgJToum7UJF0g1eyOntjCiYNthfYayFPfNJ10qp8U3PX0953XN327rbSZVBcpOH3PC0czJQAwA8qm4y/+ns32HF/eCNo60gdIwUxNNsuDOSiaB0mm9rdIjZGCW9jtjvdIBad+e/5oZrDaRwcpkKq+7flzxb/Df93/Mqk/yrXWBzZeeawGsv2X5qI79pabXqKpk4RReiUgVB1tEQgA5BDcXANWrsUeHqmBAMD0rRv9pCZJpMpGQ93Hsn/P7SEBWwQCAIw1QiqpGxoXhYSGxl5S91AaJwW6tg60F7fMMzKBlhgtVExfa5YM4NRoDeTrJ8c30PB2kom/Q2KIVHDj531tSlUhQrIuW7Curap3+k53QQ5rSIWheRBBYTa2T0mlSY3Wh6l+M99nycQPByu8Xum12GEUjHfeHlh3aX3T8MiglOSACF/svrDy2jzIV+3FHU51lL/gh93HV0/tOHHfD6ROJuvx3GcthQeTTCrBe/P+tZeL+9eM3HJG5wF0l+1+jWLfU/GOAGBwSyljrn3JdBptXDbdBwABQTH93SREv3c2zH5UzmTGzEEqSMgASAMQgFNBeO3mmlWdb/y3eqqaMwD0tSm1TIVHYwA+U3dt19nsxbm7/rjl6iaR9TOhrvTmhRX/HHjoUjpEDSsrdU9ZPDEVxnIjqyZrfsKSlnRXdRsr+i4fv8vwiwAAAABJRU5ErkJggg==\" />\n                        </IconButton>\n                        <Menu\n                            id=\"simple_menu_emoji\"\n                            anchorEl={anchorEl}\n                            keepMounted\n                            open={Boolean(anchorEl)}\n                            onClose={handleClose}\n                        >\n                            {emoji.map(function (emo, i) {\n                                return (<span key={i} onClick={(e) => emojiSubmit(e, emo)} dangerouslySetInnerHTML={{ __html: \"&#\" + emo + \";\" }}></span>)\n                            })}\n                        </Menu>\n                    </div>\n                </>\n            </div>\n        </form>\n    )\n}\n\nexport const MessageContainer = () => {\n    const [room, setRoom] = useState(null)\n    const { listMessage } = useContext(MessageList)\n    const [open, setOpen] = useState(false)\n\n    const hanldeSetRoom = value => {\n        let id = value.split(\",\")\n        setRoom(id[0])\n    }\n\n    return (\n        <div className=\"accordion_div\" style={open === true ? { height: \"450px\" } : { height: \"initial\" }}>\n            <div className=\"accordion_header\">\n                {room ? <IconButton onClick={e => setRoom(null)}>\n                    <ArrowBackIosIcon />\n                </IconButton> : console.log()}\n                <div onClick={e => setOpen(!open)} className=\"accordion_message\">\n                    <IconButton>\n                        Message\n                        {open === false ?\n                            <span className=\"sympol\">\n                                <ExpandLessIcon />\n                            </span> :\n                            <span className=\"sympol\">\n                                <ExpandMoreIcon />\n                            </span>\n                        }\n\n                    </IconButton>\n                </div>\n            </div>\n            <div style={open === true ? { display: \"block\" } : { display: \"none\" }} className=\"accordion_data\">\n                {room ? <RenderChat id={room} userId={userId} /> : listMessage && listMessage.length > 0 ? listMessage.map((val, i) => <div key={i}>\n                    <ContactContain\n                        onClick={(value) => hanldeSetRoom(value)}\n                        message={val.data}\n                        users={val.user}\n                        idRoom={val.idRoom}\n                        target={room}\n                        nread={val.nread}\n                    />\n                </div>\n                ) : console.log()\n                }\n            </div>\n        </div >\n    )\n}"]},"metadata":{},"sourceType":"module"}