{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/home/duythai/Developer/sadness/a-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/duythai/Developer/sadness/a-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/duythai/Developer/sadness/a-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _asyncIterator from\"/home/duythai/Developer/sadness/a-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncIterator\";import React,{useEffect,useContext}from'react';import\"../style/newspage.css\";import PostBlogMain from\"../../helpers/postBlog\";import ViewBlogMain from\"./viewBlog/viewBlog\";import socketApp from\"../../socket\";import{ToastContainer}from\"react-toastify\";import{Notifications}from'../../userContext';import{HeaderPage,NavbarRight}from'../../helpers/news';function NewsMain(){// const id = getCookie().token || \"\"\nvar _useContext=useContext(Notifications),value=_useContext.value,setValue=_useContext.setValue;var socket=socketApp.getSocket();useEffect(function(){socket.on(\"activities\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(msg){var arr,i,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,_value,data,old;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:arr={type:msg.type,value:msg.value,number:msg.number};i=0;_iteratorNormalCompletion=true;_didIteratorError=false;_context.prev=4;_iterator=_asyncIterator(value);case 6:_context.next=8;return _iterator.next();case 8:_step=_context.sent;_iteratorNormalCompletion=_step.done;_context.next=12;return _step.value;case 12:_value=_context.sent;if(_iteratorNormalCompletion){_context.next=20;break;}data=_value;if(data.type===arr.type&&data.value===arr.value){old=_toConsumableArray(arr);old.splice(i,1);old.unshift(data);setValue(old);}else{setValue(function(a){return[].concat(_toConsumableArray(a),[arr]);});}i++;case 17:_iteratorNormalCompletion=true;_context.next=6;break;case 20:_context.next=26;break;case 22:_context.prev=22;_context.t0=_context[\"catch\"](4);_didIteratorError=true;_iteratorError=_context.t0;case 26:_context.prev=26;_context.prev=27;if(!(!_iteratorNormalCompletion&&_iterator.return!=null)){_context.next=31;break;}_context.next=31;return _iterator.return();case 31:_context.prev=31;if(!_didIteratorError){_context.next=34;break;}throw _iteratorError;case 34:return _context.finish(31);case 35:return _context.finish(26);case 36:if(value.length===0){setValue(function(a){return[].concat(_toConsumableArray(a),[arr]);});}case 37:case\"end\":return _context.stop();}}},_callee,null,[[4,22,26,36],[27,,31,35]]);}));return function(_x){return _ref.apply(this,arguments);};}());},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"news_page\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(HeaderPage,{value:value}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",id:\"news\",style:{height:\"max-content\"},children:[/*#__PURE__*/_jsx(NavbarRight,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"main_news\",children:[/*#__PURE__*/_jsx(PostBlogMain,{}),/*#__PURE__*/_jsx(ViewBlogMain,{})]})]})]});}export default NewsMain;","map":{"version":3,"sources":["/home/duythai/Developer/sadness/a-client/src/component/newsComponents/newsMain.js"],"names":["React","useEffect","useContext","PostBlogMain","ViewBlogMain","socketApp","ToastContainer","Notifications","HeaderPage","NavbarRight","NewsMain","value","setValue","socket","getSocket","on","msg","arr","type","number","i","data","old","splice","unshift","a","length","height"],"mappings":"ytBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,UAA3B,KAA6C,OAA7C,CACA,MAAO,uBAAP,CACA,MAAOC,CAAAA,YAAP,KAAyB,wBAAzB,CACA,MAAOC,CAAAA,YAAP,KAAyB,qBAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,OAASC,cAAT,KAA+B,gBAA/B,CACA,OAASC,aAAT,KAA8B,mBAA9B,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,oBAAxC,CAEA,QAASC,CAAAA,QAAT,EAAoB,CAChB;AADgB,gBAEYR,UAAU,CAACK,aAAD,CAFtB,CAERI,KAFQ,aAERA,KAFQ,CAEDC,QAFC,aAEDA,QAFC,CAGhB,GAAIC,CAAAA,MAAM,CAAGR,SAAS,CAACS,SAAV,EAAb,CAEAb,SAAS,CAAC,UAAM,CACZY,MAAM,CAACE,EAAP,CAAU,YAAV,0FAAwB,iBAAOC,GAAP,uNAChBC,GADgB,CACV,CACNC,IAAI,CAAEF,GAAG,CAACE,IADJ,CAENP,KAAK,CAAEK,GAAG,CAACL,KAFL,CAGNQ,MAAM,CAAEH,GAAG,CAACG,MAHN,CADU,CAMhBC,CANgB,CAMZ,CANY,iGAOGT,KAPH,wOAOLU,IAPK,QAQhB,GAAIA,IAAI,CAACH,IAAL,GAAcD,GAAG,CAACC,IAAlB,EAA0BG,IAAI,CAACV,KAAL,GAAeM,GAAG,CAACN,KAAjD,CAAwD,CAChDW,GADgD,oBACtCL,GADsC,EAEpDK,GAAG,CAACC,MAAJ,CAAWH,CAAX,CAAc,CAAd,EACAE,GAAG,CAACE,OAAJ,CAAYH,IAAZ,EACAT,QAAQ,CAACU,GAAD,CAAR,CACH,CALD,IAKO,CACHV,QAAQ,CAAC,SAAAa,CAAC,qCAAQA,CAAR,GAAWR,GAAX,IAAF,CAAR,CACH,CACDG,CAAC,GAhBe,0hBAkBpB,GAAIT,KAAK,CAACe,MAAN,GAAiB,CAArB,CAAwB,CACpBd,QAAQ,CAAC,SAAAa,CAAC,qCAAQA,CAAR,GAAWR,GAAX,IAAF,CAAR,CACH,CApBmB,uFAAxB,gEAsBH,CAvBQ,CAuBN,EAvBM,CAAT,CAwBA,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,KAAC,cAAD,IADJ,cAEI,KAAC,UAAD,EAAY,KAAK,CAAEN,KAAnB,EAFJ,cAGI,aAAK,SAAS,CAAC,WAAf,CAA2B,EAAE,CAAC,MAA9B,CAAqC,KAAK,CAAE,CAAEgB,MAAM,CAAE,aAAV,CAA5C,wBACI,KAAC,WAAD,IADJ,cAEI,aAAK,SAAS,CAAC,WAAf,wBACI,KAAC,YAAD,IADJ,cAEI,KAAC,YAAD,IAFJ,GAFJ,GAHJ,GADJ,CAcH,CAED,cAAejB,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useContext } from 'react'\nimport \"../style/newspage.css\"\nimport PostBlogMain from \"../../helpers/postBlog\"\nimport ViewBlogMain from \"./viewBlog/viewBlog\"\nimport socketApp from \"../../socket\"\nimport { ToastContainer } from \"react-toastify\";\nimport { Notifications } from '../../userContext';\nimport { HeaderPage, NavbarRight } from '../../helpers/news'\n\nfunction NewsMain() {\n    // const id = getCookie().token || \"\"\n    const { value, setValue } = useContext(Notifications);\n    let socket = socketApp.getSocket();\n\n    useEffect(() => {\n        socket.on(\"activities\", async (msg) => {\n            let arr = {\n                type: msg.type,\n                value: msg.value,\n                number: msg.number\n            }\n            let i = 0\n            for await (let data of value) {\n                if (data.type === arr.type && data.value === arr.value) {\n                    let old = [...arr]\n                    old.splice(i, 1)\n                    old.unshift(data)\n                    setValue(old)\n                } else {\n                    setValue(a => [...a, arr])\n                }\n                i++\n            }\n            if (value.length === 0) {\n                setValue(a => [...a, arr])\n            }\n        })\n    }, [])\n    return (\n        <div className=\"news_page\">\n            <ToastContainer />\n            <HeaderPage value={value} />\n            <div className=\"container\" id=\"news\" style={{ height: \"max-content\" }}>\n                <NavbarRight />\n                <div className=\"main_news\">\n                    <PostBlogMain />\n                    <ViewBlogMain />\n                </div>\n\n            </div>\n        </div >\n    )\n}\n\nexport default NewsMain\n"]},"metadata":{},"sourceType":"module"}