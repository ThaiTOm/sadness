{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/duythai/Developer/sadness/a-client/src/component/loginComponent/LoginForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport GoogleLogin from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { authenicate } from \"../../helpers/auth\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport { Link, useHistory } from 'react-router-dom';\nconst useStyles = makeStyles(theme => ({\n  floatingLabelFocusStyle: {\n    color: \"#fff\"\n  }\n}));\n\nfunction LoginForm() {\n  _s();\n\n  const classes = useStyles();\n  const history = useHistory();\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\"\n  }); // const [redirect, setRedirect] = useStae(false)\n\n  const {\n    email,\n    password\n  } = formData;\n\n  const handleChange = text => e => {\n    setFormData({ ...formData,\n      [text]: e.target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (email && password) {\n      axios.post(`http://localhost:2704/api/login`, {\n        email,\n        password\n      }).then(res => {\n        setFormData({ ...formData,\n          email: \"\",\n          password: \"\"\n        });\n        toast.success(res.data.message);\n\n        if (res.data.blockN > 3) {\n          history.push(\"/report\");\n        }\n\n        authenicate(res);\n        window.location.reload(false);\n      }).catch(err => {\n        toast.error(\"Có lỗi đã xảy ra bạn hãy thử lại sau\");\n      });\n    } else {\n      toast.error(\"Please fill all text field\");\n    }\n  };\n\n  const sendGoogleToken = tokenId => {\n    axios.post(\"http://localhost:2704/api/googlelogin\", {\n      idToken: tokenId\n    }).then(res => {\n      authenicate(res);\n      window.location.reload(false);\n    }).catch(err => {\n      toast.error(\"Login with Google failed\");\n    });\n  };\n\n  const sendFacebookToken = (userID, accessToken) => {\n    axios.post(\"http://localhost:2704/api/facebooklogin\", {\n      userID,\n      accessToken\n    }).then(res => {\n      authenicate(res);\n      window.location.reload(false);\n    }).catch(err => {\n      toast.error(\"Login with Facebook failed\");\n    });\n  };\n\n  const responseGoogle = response => {\n    sendGoogleToken(response.tokenId);\n  };\n\n  const responseFacebook = response => {\n    console.log(response);\n    sendFacebookToken(response.userID, response.accessToken);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"form_signIn\",\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"sign_in_title\",\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inputField\",\n      children: /*#__PURE__*/_jsxDEV(TextField, {\n        value: email,\n        onChange: handleChange(\"email\"),\n        id: \"outlined-basic\",\n        label: \"Email\",\n        variant: \"outlined\",\n        InputLabelProps: {\n          className: classes.floatingLabelFocusStyle\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inputField\",\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        value: password,\n        onChange: handleChange(\"password\"),\n        id: \"outlined-password-input\",\n        label: \"Password\",\n        type: \"password\",\n        autoComplete: \"current-password\",\n        variant: \"outlined\",\n        InputLabelProps: {\n          className: classes.floatingLabelFocusStyle\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-sign\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/users/forget\",\n          children: \"Qu\\xEAn m\\u1EADt kh\\u1EA9u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"treat-button\",\n          type: \"submit\",\n          children: \"\\u0110\\u0103ng nh\\u1EADp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"divider\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(GoogleLogin, {\n      className: \"google_login\",\n      clientId: \"583969708221-h0kl5ki0e91mkb3mafoecak1sj8b4ih3.apps.googleusercontent.com\",\n      buttonText: \"Login with Google\",\n      onSuccess: responseGoogle,\n      cookiePolicy: 'single_host_origin'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FacebookLogin, {\n      appId: \"688117411891893\",\n      fields: \"name,email,picture\",\n      onClick: responseFacebook,\n      cssClass: \"facebook_login\",\n      icon: \"fa-facebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LoginForm, \"CivetldpujTtoCC4CN8sn2La04g=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["/home/duythai/Developer/sadness/a-client/src/component/loginComponent/LoginForm.js"],"names":["React","useState","TextField","GoogleLogin","FacebookLogin","makeStyles","authenicate","ToastContainer","toast","axios","Link","useHistory","useStyles","theme","floatingLabelFocusStyle","color","LoginForm","classes","history","formData","setFormData","email","password","handleChange","text","e","target","value","handleSubmit","preventDefault","post","then","res","success","data","message","blockN","push","window","location","reload","catch","err","error","sendGoogleToken","tokenId","idToken","sendFacebookToken","userID","accessToken","responseGoogle","response","responseFacebook","console","log","className"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport TextField from '@material-ui/core/TextField';\nimport GoogleLogin from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { authenicate } from \"../../helpers/auth\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport axios from \"axios\";\nimport { Link, useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n    floatingLabelFocusStyle: {\n        color: \"#fff\"\n    }\n}));\n\nfunction LoginForm() {\n    const classes = useStyles();\n    const history = useHistory();\n    const [formData, setFormData] = useState({\n        email: \"\",\n        password: \"\"\n    })\n    // const [redirect, setRedirect] = useStae(false)\n    const { email, password } = formData;\n    const handleChange = text => e => {\n        setFormData({ ...formData, [text]: e.target.value })\n    }\n    const handleSubmit = e => {\n        e.preventDefault();\n        if (email && password) {\n            axios.post(`http://localhost:2704/api/login`, {\n                email, password\n            }).then(res => {\n                setFormData({\n                    ...formData,\n                    email: \"\",\n                    password: \"\"\n                });\n                toast.success(res.data.message);\n                if (res.data.blockN > 3) {\n                    history.push(\"/report\")\n                }\n                authenicate(res);\n                window.location.reload(false);\n            }).catch(err => {\n                toast.error(\"Có lỗi đã xảy ra bạn hãy thử lại sau\")\n            })\n        }\n        else {\n            toast.error(\"Please fill all text field\")\n        }\n    }\n    const sendGoogleToken = tokenId => {\n        axios.post(\"http://localhost:2704/api/googlelogin\", {\n            idToken: tokenId\n        }).then(res => {\n            authenicate(res)\n            window.location.reload(false);\n        }).catch(err => {\n            toast.error(\"Login with Google failed\")\n        })\n    }\n    const sendFacebookToken = (userID, accessToken) => {\n        axios.post(\"http://localhost:2704/api/facebooklogin\", {\n            userID, accessToken\n        }).then(res => {\n            authenicate(res)\n            window.location.reload(false);\n        }).catch(err => {\n            toast.error(\"Login with Facebook failed\")\n        })\n    }\n    const responseGoogle = response => {\n        sendGoogleToken(response.tokenId)\n    }\n    const responseFacebook = response => {\n        console.log(response)\n        sendFacebookToken(response.userID, response.accessToken)\n    }\n    return (\n        <form className=\"form_signIn\" onSubmit={handleSubmit}>\n            <ToastContainer />\n            <p className=\"sign_in_title\">Sign In</p>\n            <div className=\"inputField\">\n                <TextField\n                    value={email}\n                    onChange={handleChange(\"email\")}\n                    id=\"outlined-basic\"\n                    label=\"Email\"\n                    variant=\"outlined\"\n                    InputLabelProps={{\n                        className: classes.floatingLabelFocusStyle,\n                    }}\n                />\n            </div>\n            <div className=\"inputField\">\n                <TextField\n                    value={password}\n                    onChange={handleChange(\"password\")}\n                    id=\"outlined-password-input\"\n                    label=\"Password\"\n                    type=\"password\"\n                    autoComplete=\"current-password\"\n                    variant=\"outlined\"\n                    InputLabelProps={{\n                        className: classes.floatingLabelFocusStyle,\n                    }}\n                />\n                <div className=\"button-sign\">\n                    <Link to=\"/users/forget\">Quên mật khẩu</Link>\n                    <button className=\"treat-button\" type=\"submit\">Đăng nhập</button>\n                </div>\n            </div>\n            <div className=\"divider\"></div>\n            <GoogleLogin\n                className=\"google_login\"\n                clientId=\"583969708221-h0kl5ki0e91mkb3mafoecak1sj8b4ih3.apps.googleusercontent.com\"\n                buttonText=\"Login with Google\"\n                onSuccess={responseGoogle}\n                cookiePolicy={'single_host_origin'}\n            />\n            <FacebookLogin\n                appId=\"688117411891893\"\n                fields=\"name,email,picture\"\n                onClick={responseFacebook}\n                cssClass=\"facebook_login\"\n                icon=\"fa-facebook\"\n            />\n        </form>\n\n    )\n}\n\nexport default LoginForm\n"]},"metadata":{},"sourceType":"module"}